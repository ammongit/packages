# Maintainer: Ammon Smith <ammon.i.smith@gmail.com>

# I *DO NOT* maintain the source repo.
_pkgname=gitsome
pkgname="${_pkgname}-git"
pkgver=1.f6a3c04
pkgrel=1
pkgdesc='A superchaged git/shell CLI with GitHub integration'
arch=('any')
url="https://github.com/whatyouhide/$_pkgname.git"
license=('MIT')
depends=('python' 'xonsh' 'python-uritemplate')
source=("git+https://github.com/donnemartin/$_pkgname.git")
sha256sums=('SKIP')

pkgver() {
    cd "$srcdir/$_pkgname"
    printf '1.%s' "$(git rev-parse --short HEAD)"
}

build() {
    cd "$srcdir/$_pkgname"
    python setup.py build
}

package() {
    cd "$srcdir/$_pkgname"
    python setup.py install --prefix=/usr --root="$pkgdir" --optimize=1

    # Remove xonsh, it's a dependency and should already be installed.
    rm "$pkgdir"/usr/bin/xonsh*
    rm -r "$pkgdir"/usr/lib/python3.5/site-packages/xonsh
}

