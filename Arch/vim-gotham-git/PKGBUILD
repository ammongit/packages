# Maintainer: Ammon Smith <ammon.i.smith@gmail.com>

pkgname="vim-gotham-git"
pkgver=1.4564469
pkgrel=1
pkgdesc='Gotham is a very dark vim colorscheme.'
arch=('any')
url="https://github.com/whatyouhide/${pkgname%-git}.git"
license=('MIT')
depends=('vim')
optdepends=('vim-airline: For vim airline theme'
			'vim-lightline-git: For vim lightline theme')
source=("git+https://github.com/whatyouhide/${pkgname%-git}.git")
sha256sums=('SKIP')

pkgver() {
	cd "$srcdir/${pkgname%-git}"
	printf '1.%s' "$(git rev-parse --short HEAD)"
}

build() {
	cd "$srcdir/${pkgname%-git}"
	true
}

package() {
	install -D -m644 "$srcdir/${pkgname%-git}/colors/gotham.vim" "$pkgdir/usr/share/vim/vim74/colors/gotham.vim"
	install -D -m644 "$srcdir/${pkgname%-git}/colors/gotham256.vim" "$pkgdir/usr/share/vim/vim74/colors/gotham256.vim"

	if pacman -Qs '^vim-airline' > /dev/null; then
		install -D -m644 "$srcdir/${pkgname%-git}/autoload/airline/themes/gotham.vim" "$pkgdir/usr/share/vim/vimfiles/autoload/airline/themes/gotham.vim"
		install -D -m644 "$srcdir/${pkgname%-git}/autoload/airline/themes/gotham256.vim" "$pkgdir/usr/share/vim/vimfiles/autoload/airline/themes/gotham256.vim"
	else
		printf 'Package "vim-airline" not found, not installing themes.\n'
	fi

	if pacman -Qs '^vim-lightline' > /dev/null; then
		install -D -m644 "$srcdir/${pkgname%-git}/autoload/lightline/colorscheme/gotham.vim" "$pkgdir/usr/share/vim/vimfiles/autoload/lightline/colorscheme/gotham.vim"
		install -D -m644 "$srcdir/${pkgname%-git}/autoload/lightline/colorscheme/gotham256.vim" "$pkgdir/usr/share/vim/vimfiles/autoload/lightline/colorscheme/gotham256.vim"
	else
		printf 'Package "vim-lightline" not found, not installing themes.\n'
	fi
}

# vim: set sw=4 ts=4 noet:
